<!DOCTYPE html>
<html lang="en">
<head>
     <title>Landing Page No Login</title>
     <!-- Bootstrap CSS -->
     <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

     <!-- MAIN CSS -->
     <link rel="stylesheet" href="static/css/style.css">

     <style>
        .body {
            background: linear-gradient(to bottom, gold, black);
            margin: 0; /* Remove default body margin */
            padding: 0; /* Remove default body padding */
        }

        .carousel-caption {
            color: black;
        }
    </style>
</head>
<body>
    <section class="gradient-custom">
        <div class="container py-5">
            <div class="row">
                <div class="col-md-6 col-lg-5 col-xl-5 mb-4 mb-md-0">
                    <h5 class="font-weight-bold mb-3 text-center text-white">Member</h5>
                    <div class="card mask-custom">
                        <div class="card-body">
                            <ul class="list-unstyled mb-0">
                                <li class="p-2 border-bottom" style="border-bottom: 1px solid rgba(255,255,255,.3) !important;">
                                    <a href="#!" class="d-flex justify-content-between link-light">
                                        <div class="d-flex flex-row">
                                            <img src="static/images/TreeHugger.webp" alt="avatar" class="rounded-circle d-flex align-self-center me-3 shadow-1-strong" width="60">
                                            <div class="pt-1">
                                                <p class="fw-bold mb-0">Forest Intellect Research & Technology System (FIRST)</p>
                                                <p class="small text-white">Hello, Are you there?</p>
                                            </div>
                                        </div>
                                        <div class="pt-1">
                                            <p class="small text-white mb-1">Just now</p>
                                            <span class="badge bg-danger float-end">1</span>
                                        </div>
                                    </a>
                                    <form id="uploadForm" method="POST" action="{{ url_for('upload_material') }}" enctype="multipart/form-data">
                                        <label for="className" class="text-white" style="color: black;">Class Name:</label>
                                        <input type="text" name="className" id="className" required>
                                        <br>
                                        <label for="topics" class="text-white" style="color: black;">Topics:</label>
                                        <input type="text" name="topics" id="topics" required>
                                        <br>
                                        <label for="fileInput" class="text-white" style="color: black;">Upload Class Material:</label>
                                        <input type="file" name="fileInput" id="fileInput" accept=".pdf, .txt" onchange="displayFileName()" required>
                                        <br>
                                        <button type="button" class="btn btn-light btn-sm mt-2" onclick="document.getElementById('uploadForm').submit();">Let model read the document</button>
                                        <span id="fileNameDisplay"></span>
                                    </form>
                                    
                                    <!-- Add JavaScript to display the selected file name -->
                                    <script>
                                        function displayFileName() {
                                            const fileInput = document.getElementById('fileInput');
                                            const fileNameDisplay = document.getElementById('fileNameDisplay');
                                            fileNameDisplay.innerText = fileInput.files[0].name;
                                        }
                                    </script>
                                    
                                </li>
                                
                                
                                
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-7 col-xl-7">
                    <div class="chat-history-container">
                        <ul class="chat-history list-unstyled text-white">
                            <!-- Chat history loop -->
                            {% for message in chat_history %}
                                {% if message.user %}
                                    <!-- User message on the right -->
                                    <li class="d-flex justify-content-end mb-4">
                                        <div class="card mask-custom">
                                            <div class="card-header d-flex justify-content-between p-3" style="border-bottom: 1px solid rgba(255,255,255,.3);">
                                                <p class="fw-bold mb-0" style="color: black;">Student User</p>
                                                <p class="text-light small mb-0"><i class="far fa-clock"></i> {{ message.timestamp }}</p>
                                            </div>
                                            <div class="card-body" style="color: black;">
                                                <pre class="mb-0">{{ message.message }}</pre>
                                            </div>
                                        </div>
                                        <img src="static/images/TreeHugger.webp" alt="avatar" class="rounded-circle d-flex align-self-start ms-3 shadow-1-strong" width="60">
                                    </li>
                                {% else %}
                                    <!-- Bot message on the left -->
                                    <li class="d-flex justify-content-start mb-4">
                                        <img src="static/images/TreeHugger.webp" alt="avatar" class="rounded-circle d-flex align-self-start me-3 shadow-1-strong" width="60">
                                        <div class="card mask-custom">
                                            <div class="card-header d-flex justify-content-between p-3" style="border-bottom: 1px solid rgba(255,255,255,.3);">
                                                <p class="fw-bold mb-0" style="color: black;">FIRST</p>
                                                <p class="text-light small mb-0"><i class="far fa-clock"></i> {{ message.timestamp }}</p>
                                            </div>
                                            <div class="card-body" style="color: black;">
                                                <pre class="mb-0">{{ message.message }}</pre>
                                            </div>
                                        </div>
                                    </li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="input-form-container">
                        <div class="input-form">
                            <form method="POST" action="{{ url_for('process_input') }}">
                                <div class="form-outline form-white">
                                    <textarea class="form-control" name="user_input" id="textAreaExample3" rows="4"></textarea>
                                    <label class="form-label" for="textAreaExample3">Message</label>
                                </div>
                                <button type="submit" class="btn btn-light btn-lg btn-rounded float-end">Send</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
</html>